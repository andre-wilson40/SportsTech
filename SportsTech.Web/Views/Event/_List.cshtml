@model SportsTech.Web.ViewModels.Event.ListViewModel

<p>    
    <button id="create-event-btn" class="btn btn-primary">Create</button>
</p>
<div id="create-event-container" style="display:none;"></div>
<table class="table">
    <tr>
        <th>Name</th>
        <th>Score</th>
        <th>Event date</th>
        <th>Home Game</th>
        <th></th>
    </tr>

@foreach (var item in Model.Events) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Score)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.EventDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.IsHomeGame)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })
        </td>
    </tr>
}
</table>

<script>
    $(function () {
        $("#create-event-btn").on("click", function (event) {
            event.preventDefault();
            $("#create-event-container")
               .load('@Url.Action("Create")')
               .dialog({
                   autoOpen: true,
                   title: 'Create new event',
                   modal: true,
                   width: 400                   
               })
        });

        $(".cancel-ui-button")
    });

    $(document).on("click",".btn-cancel", function (event) {
        event.preventDefault();
        $('#create-event-container').dialog('close');
    });

    $(document).on("click", "form .btn-primary", function (event) {
       // $("#CreateNewFarmForm").validate();
        event.preventDefault();

        if ($("#CreateNewEvent").valid()) {
            
            $.ajaxUnobtrusive({
                beforeSend: function () {
                },
                type: "POST",
                url: '@Url.Action("CreateEvent")',
                data: $("#CreateNewEvent").serialize(),
                success: function (html) {
                    
                }
            });
        }

        return false;
    });

</script>